---
import Layout from "../../layouts/Layout.astro";
import Navigation from "../../components/Navigation.astro";
import Footer from "../../components/Footer.astro";

const posts = await Astro.glob("./*.mdx");
---

<Layout
  title="Welcome to Astro."
  description="Converting Emotions into Insights"
  image="https://www.cognicue.in/assets/img/hero/differentfacess.jpg"
>
  <Navigation />
  <main class="">
    <div class="max-w-7xl mt-4 mx-auto flex justify-between items-start">
      <div>
        <p class="font-semibold text-xs">
          {new Date().toLocaleDateString("en-US", { weekday: "long" })}, {
            new Date().toLocaleDateString("en-US", { month: "long" })
          }
          {new Date().getDate()}, {new Date().getFullYear()}
        </p>
        <p class="text-xs mt-1">Today's Insights</p>
      </div>
      <div class="text-right">
        <p class="flex gap-2 items-baseline">
          <span class="text-xs">Today's</span>
          <span id="current_weather" class="font-bold"></span>
          <span id="current_weather_max" class="text-xs mb-0.5"></span>
          <span id="current_weather_min" class="text-xs mb-0.5 opacity-50"
          ></span>
        </p>
        <a
          href="/contact"
          class="text-xs hover:underline hover:underline-offset-2">Contact us</a
        >
      </div>
    </div>
    <h1 class="max-w-7xl mt-10 mx-auto text-5xl font-bold">
      Insights & advice from our team
    </h1>
    <h2 class="max-w-7xl mt-5 mx-auto text-xl text-gray-500">
      The latest industry news, interviews, technologies, and resources.
    </h2>
    <section class="max-w-7xl mt-8 mx-auto">
      {
        posts.map((post) => (
          <div class="w-full p-2 mb-6">
            <a href={`/blog/${post.frontmatter.slug}`} class="flex flex-wrap">
              <div class="w-1/2 rounded-lg overflow-hidden">
                <img
                  class="w-full h-44 min-h-[300px] object-cover block"
                  src={post.frontmatter.image}
                  alt={post.frontmatter.title}
                  loading="lazy"
                  decoding="async"
                />
              </div>
              <div class="w-1/2 md:pl-8">
                <h3 class="font-semibold text-lg mb-2 hover:opacity-75">
                  {post.frontmatter.title}
                </h3>
                <h4 class="text-md text-gray-500 mb-2 hover:opacity-90">
                  {post.frontmatter.summary}
                </h4>
                <figure class="flex items-center gap-2 mt-4">
                  <img
                    src={post.frontmatter.author.image}
                    alt={post.frontmatter.author.name}
                    class="w-6 h-6 object-cover rounded-full"
                  />
                  <figcaption>
                    <p class="text-sm font-semibold">
                      By {post.frontmatter.author.name}
                    </p>
                  </figcaption>
                </figure>
                <time
                  class="mt-3 text-xs block"
                  datetime={new Date(
                    post.frontmatter.publishDate
                  ).toISOString()}
                >
                  {new Date(post.frontmatter.publishDate)
                    .toDateString()
                    .slice(4)}
                </time>
              </div>
            </a>
          </div>
        ))
      }
    </section>
    <section class="max-w-7xl mt-8 mx-auto">
      <div class="border-t border-gray-500 mx-3 py-4">
        <span class="font-semibold">More on Instaram</span>
        <a
          class="font-semibold text-lg"
          href="https://www.instagram.com/cognicue/">@CogniCue</a
        >
      </div>
      <div class="blog_left_sidebar">
        <!-- Place <div> tag where you want the feed to appear -->
        <div id="curator-feed-default-layout">
          <a
            href="https://curator.io"
            rel="noopener noreferrer"
            target="_blank"
            class="crt-logo crt-tag">Powered by Curator.io</a
          >
        </div>
        <!-- The Javascript can be moved to the end of the html page before the </body> tag -->
        <script type="text/javascript" is:inline>
          /* curator-feed-default-layout */
          (function () {
            var i,
              e,
              d = document,
              s = "script";
            i = d.createElement("script");
            i.async = 1;
            i.src =
              "https://cdn.curator.io/published/c7de9366-fae8-4ded-be2f-49099d452fe5.js";
            e = d.getElementsByTagName(s)[0];
            e.parentNode.insertBefore(i, e);
          })();
        </script>
      </div>
    </section>
  </main>
  <Footer />
  <script is:inline>
    fetch(
      "https://api.open-meteo.com/v1/forecast?latitude=15.2993&longitude=74.1240&current_weather=true&temperature_unit=celsius&daily=apparent_temperature_max,apparent_temperature_min&timezone=GMT"
    )
      .then(function (res) {
        return res.json();
      })
      .then(function (data) {
        console.log(data);
        document.querySelector("#current_weather").innerHTML =
          data.current_weather.temperature + "°C";
        document.querySelector("#current_weather_max").innerHTML =
          data.daily.apparent_temperature_max[0] + "°";
        document.querySelector("#current_weather_min").innerHTML =
          data.daily.apparent_temperature_min[0] + "°";
      });
  </script>
</Layout>
